# Agent æ¨¡å¼æŒ‡å— <Badge type="tip" text="æ ¸å¿ƒåŠŸèƒ½" />

Agent æ¨¡å¼è®© AI èƒ½å¤Ÿè‡ªä¸»è°ƒç”¨å·¥å…·å®Œæˆå¤æ‚ä»»åŠ¡ï¼Œæ˜¯æ’ä»¶çš„æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ã€‚

::: info ğŸ¤– ä»€ä¹ˆæ˜¯ Agentï¼Ÿ
Agentï¼ˆæ™ºèƒ½ä½“ï¼‰æ˜¯æŒ‡ AI ä¸ä»…èƒ½å›ç­”é—®é¢˜ï¼Œè¿˜èƒ½**ä¸»åŠ¨è°ƒç”¨å·¥å…·ã€æ‰§è¡Œæ“ä½œã€è·å–ä¿¡æ¯**ï¼Œåƒä¸€ä¸ªæ™ºèƒ½åŠ©æ‰‹ä¸€æ ·ä¸ºä½ å®Œæˆä»»åŠ¡ã€‚
:::

## ä»€ä¹ˆæ˜¯ Agent æ¨¡å¼ {#what-is-agent}

åœ¨ Agent æ¨¡å¼ä¸‹ï¼ŒAI ä¸ä»…å¯ä»¥å›å¤æ¶ˆæ¯ï¼Œè¿˜èƒ½ï¼š

- **è°ƒç”¨å·¥å…·**ï¼šæ‰§è¡Œæœç´¢ã€å‘æ¶ˆæ¯ã€æ“ä½œç¾¤ç»„ç­‰
- **å¤šæ­¥æ¨ç†**ï¼šåˆ†è§£å¤æ‚ä»»åŠ¡ï¼Œé€æ­¥å®Œæˆ
- **è·å–ä¿¡æ¯**ï¼šä¸»åŠ¨æŸ¥è¯¢æ—¶é—´ã€å¤©æ°”ã€ç”¨æˆ·ä¿¡æ¯ç­‰
- **è®°å¿†å­¦ä¹ **ï¼šè®°ä½ç”¨æˆ·åå¥½ï¼Œä¸ªæ€§åŒ–å›å¤

```mermaid
graph LR
    A["ç”¨æˆ·æ¶ˆæ¯"] --> B["AI åˆ†æ"]
    B --> C{"éœ€è¦å·¥å…·?"}
    C -->|æ˜¯| D["è°ƒç”¨å·¥å…·"]
    D --> E["è·å–ç»“æœ"]
    E --> B
    C -->|å¦| F["ç”Ÿæˆå›å¤"]
```

## å¿«é€Ÿå¯ç”¨ {#quick-enable}

::: code-group
```txt [æ–¹å¼ä¸€ï¼šWeb é¢æ¿]
1. æ‰“å¼€ç®¡ç†é¢æ¿
2. è¿›å…¥ã€Œé…ç½® â†’ MCP/å·¥å…·ã€
3. å¼€å¯ã€Œå¯ç”¨å†…ç½®å·¥å…·ã€
4. é€‰æ‹©éœ€è¦çš„å·¥å…·ç±»åˆ«
```

```yaml [æ–¹å¼äºŒï¼šé…ç½®æ–‡ä»¶]
builtinTools:
  enabled: true
  enabledCategories:
    - basic      # åŸºç¡€å·¥å…·
    - user       # ç”¨æˆ·å·¥å…·
    - web        # ç½‘ç»œå·¥å…·
    - group      # ç¾¤ç»„å·¥å…·
```
:::

## å·¥å…·ç±»åˆ«ï¼ˆ22ä¸ªï¼‰{#tool-categories}

| ç±»åˆ« | å›¾æ ‡ | è¯´æ˜ | ç¤ºä¾‹å·¥å…· |
|:-----|:----:|:-----|:---------|
| **basic** | ğŸ”§ | åŸºç¡€åŠŸèƒ½ | `get_time`, `calculate` |
| **user** | ğŸ‘¤ | ç”¨æˆ·ä¿¡æ¯ | `get_user_info`, `get_user_avatar` |
| **group** | ğŸ‘¥ | ç¾¤ç»„ä¿¡æ¯ | `get_group_info`, `get_member_list` |
| **message** | ï¿½ | æ¶ˆæ¯æ“ä½œ | `send_message`, `get_chat_history` |
| **admin** | ğŸ›¡ï¸ | ç¾¤ç®¡ç† | `mute_member`, `kick_member` |
| **groupStats** | ğŸ“Š | ç¾¤ç»Ÿè®¡ | å‘è¨€æ¦œã€é¾™ç‹ã€ä¸æ´»è·ƒæˆå‘˜ |
| **file** | ğŸ“ | æ–‡ä»¶æ“ä½œ | ç¾¤æ–‡ä»¶ä¸Šä¼ ä¸‹è½½ã€æœ¬åœ°æ–‡ä»¶è¯»å†™ |
| **media** | ğŸ¨ | åª’ä½“å¤„ç† | å›¾ç‰‡è§£æã€OCRã€äºŒç»´ç ç”Ÿæˆ |
| **web** | ğŸŒ | ç½‘é¡µè®¿é—® | `fetch_url`, `web_search` |
| **search** | ï¿½ | æœç´¢å·¥å…· | ç½‘é¡µæœç´¢ã€WikiæŸ¥è¯¢ã€ç¿»è¯‘ |
| **utils** | ğŸ”¨ | å®ç”¨å·¥å…· | è®¡ç®—ã€ç¼–ç è½¬æ¢ã€å“ˆå¸Œ |
| **memory** | ğŸ§  | è®°å¿†ç®¡ç† | `save_memory`, `search_memory` |
| **context** | ğŸ“œ | ä¸Šä¸‹æ–‡ç®¡ç† | å¯¹è¯ä¸Šä¸‹æ–‡ã€ç¾¤èŠä¸Šä¸‹æ–‡ |
| **bot** | ğŸ¤– | Botä¿¡æ¯ | è·å–æœºå™¨äººçŠ¶æ€ã€å¥½å‹åˆ—è¡¨ |
| **voice** | ğŸ™ï¸ | è¯­éŸ³/å£°èŠ | TTSè¯­éŸ³åˆæˆã€è¯­éŸ³è¯†åˆ« |
| **extra** | âœ¨ | æ‰©å±•å·¥å…· | å¤©æ°”æŸ¥è¯¢ã€ä¸€è¨€ã€éª°å­ã€æ’ç”» |
| **shell** | ğŸ’» | ç³»ç»Ÿå‘½ä»¤ | æ‰§è¡ŒShellå‘½ä»¤ï¼ˆâš ï¸å±é™©ï¼‰ |
| **schedule** | â° | å®šæ—¶ä»»åŠ¡ | è‡ªç„¶è¯­è¨€å®šæ—¶ä»»åŠ¡ |
| **bltools** | ğŸµ | æ‰©å±•å·¥å…·é›† | QQéŸ³ä¹ã€è¡¨æƒ…åŒ…ã€Bç«™è§†é¢‘ã€GitHub |
| **reminder** | ğŸ”” | å®šæ—¶æé†’ | ç›¸å¯¹/ç»å¯¹æ—¶é—´æé†’ã€é‡å¤æé†’ |
| **imageGen** | ğŸ¨ | ç»˜å›¾æœåŠ¡ | æ–‡ç”Ÿå›¾ã€å›¾ç”Ÿå›¾ã€æ–‡ç”Ÿè§†é¢‘ |
| **qzone** | â­ | QQç©ºé—´ | å‘è¯´è¯´ã€ç‚¹èµã€ä¸ªæ€§ç­¾å |

## ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€æŸ¥è¯¢

```
ç”¨æˆ·: ç°åœ¨å‡ ç‚¹äº†ï¼Ÿ

AI: [è°ƒç”¨ get_time å·¥å…·]
    ç°åœ¨æ˜¯ 2024å¹´12æœˆ15æ—¥ ä¸‹åˆ3:30ã€‚
```

### ä¿¡æ¯æœç´¢

```
ç”¨æˆ·: å¸®æˆ‘æœç´¢ä¸€ä¸‹æœ€æ–°çš„ AI æ–°é—»

AI: [è°ƒç”¨ web_search å·¥å…·]
    æ‰¾åˆ°ä»¥ä¸‹æœ€æ–° AI æ–°é—»ï¼š
    1. OpenAI å‘å¸ƒ GPT-5...
    2. Google æ¨å‡ºæ–°ç‰ˆ Gemini...
```

### å¤æ‚ä»»åŠ¡

```
ç”¨æˆ·: æ˜å¤©ä¸‹åˆ3ç‚¹æé†’æˆ‘å¼€ä¼š

AI: [è°ƒç”¨ set_reminder å·¥å…·]
    å¥½çš„ï¼Œæˆ‘å·²è®¾ç½®æ˜å¤©ä¸‹åˆ3ç‚¹çš„æé†’ï¼šå¼€ä¼šã€‚
    å±Šæ—¶ä¼šç§èŠé€šçŸ¥ä½ ã€‚
```

### ç¾¤ç»„æ“ä½œ

```
ç”¨æˆ·: è¿™ä¸ªç¾¤æœ‰å¤šå°‘äººï¼Ÿ

AI: [è°ƒç”¨ get_group_info å·¥å…·]
    è¿™ä¸ªç¾¤ç›®å‰æœ‰ 128 ä½æˆå‘˜ï¼Œå…¶ä¸­ï¼š
    - ç¾¤ä¸» 1 äºº
    - ç®¡ç†å‘˜ 5 äºº
    - æ™®é€šæˆå‘˜ 122 äºº
```

## é¢„è®¾é…ç½®

åœ¨é¢„è®¾ä¸­å¯ä»¥ç²¾ç»†æ§åˆ¶ Agent è¡Œä¸ºï¼š

```yaml
# é¢„è®¾æ–‡ä»¶
name: æˆ‘çš„åŠ©æ‰‹

tools:
  enabled: true
  # åªå…è®¸ç‰¹å®šå·¥å…·
  allowedTools:
    - get_time
    - get_weather
    - web_search
  # æ’é™¤å±é™©å·¥å…·
  excludedTools:
    - execute_command
  # æ˜¯å¦å…è®¸å±é™©æ“ä½œ
  allowDangerous: false
```

## æƒé™æ§åˆ¶

### ç”¨æˆ·æƒé™

ä¸åŒæƒé™ç”¨æˆ·å¯ä½¿ç”¨çš„å·¥å…·ä¸åŒï¼š

| æƒé™çº§åˆ« | å¯ç”¨å·¥å…· |
|:---------|:---------|
| æ™®é€šç”¨æˆ· | åŸºç¡€å·¥å…·ã€ç”¨æˆ·å·¥å…· |
| ç¾¤ç®¡ç†å‘˜ | + ç¾¤ç»„å·¥å…· |
| ä¸»äºº | å…¨éƒ¨å·¥å…· |

### å±é™©å·¥å…·

éƒ¨åˆ†å·¥å…·è¢«æ ‡è®°ä¸ºã€Œå±é™©ã€ï¼Œéœ€è¦ç‰¹æ®Šæƒé™ï¼š

```yaml
builtinTools:
  allowDangerous: false  # é»˜è®¤ç¦ç”¨å±é™©å·¥å…·
```

å±é™©å·¥å…·åŒ…æ‹¬ï¼š
- `execute_command` - æ‰§è¡Œç³»ç»Ÿå‘½ä»¤
- `write_file` - å†™å…¥æ–‡ä»¶
- `modify_config` - ä¿®æ”¹é…ç½®

## è°ƒè¯•æ¨¡å¼

å¼€å¯è°ƒè¯•æ¨¡å¼æŸ¥çœ‹å·¥å…·è°ƒç”¨è¯¦æƒ…ï¼š

```bash
#aiè°ƒè¯•å¼€å¯
```

è°ƒè¯•ä¿¡æ¯ä¼šæ˜¾ç¤ºï¼š
- è°ƒç”¨çš„å·¥å…·åç§°
- ä¼ å…¥çš„å‚æ•°
- è¿”å›çš„ç»“æœ
- æ‰§è¡Œè€—æ—¶

```
[è°ƒè¯•] å·¥å…·è°ƒç”¨: get_weather
[è°ƒè¯•] å‚æ•°: {"city": "åŒ—äº¬"}
[è°ƒè¯•] ç»“æœ: {"temp": 15, "condition": "æ™´"}
[è°ƒè¯•] è€—æ—¶: 1.2s
```

## ChatAgent API

å¼€å‘è€…å¯ä»¥é€šè¿‡ ChatAgent ç±»ä½¿ç”¨ Agent åŠŸèƒ½ï¼š

```javascript
import { createChatAgent } from './src/services/agent/ChatAgent.js'

// åˆ›å»º Agent
const agent = await createChatAgent({
  event: e,           // æ¶ˆæ¯äº‹ä»¶
  enableSkills: true, // å¯ç”¨æŠ€èƒ½
  presetId: 'default' // ä½¿ç”¨çš„é¢„è®¾
})

// å‘é€æ¶ˆæ¯å¹¶è·å–å›å¤
const result = await agent.chat('å¸®æˆ‘æŸ¥ä¸€ä¸‹åŒ—äº¬å¤©æ°”')

console.log(result.text)      // AI å›å¤æ–‡æœ¬
console.log(result.toolCalls) // å·¥å…·è°ƒç”¨è®°å½•
```

### SkillsAgent

ç›´æ¥è°ƒç”¨å·¥å…·ï¼š

```javascript
import { SkillsAgent } from './src/services/agent/SkillsAgent.js'

const agent = new SkillsAgent({
  userId: '123456',
  groupId: '789'
})
await agent.init()

// æ‰§è¡Œå•ä¸ªå·¥å…·
const weather = await agent.execute('get_weather', { city: 'åŒ—äº¬' })

// å¹¶è¡Œæ‰§è¡Œå¤šä¸ªå·¥å…·
const results = await agent.executeParallel([
  { name: 'get_time', args: {} },
  { name: 'get_weather', args: { city: 'åŒ—äº¬' } }
])
```

## æœ€ä½³å®è·µ

### 1. åˆç†é€‰æ‹©å·¥å…·

```yaml
# âœ… æŒ‰éœ€å¯ç”¨
builtinTools:
  enabledCategories:
    - basic
    - user

# âŒ å…¨éƒ¨å¯ç”¨å¯èƒ½å¯¼è‡´æ··ä¹±
builtinTools:
  enabledCategories:
    - all
```

### 2. é¢„è®¾éš”ç¦»

ä¸åŒåœºæ™¯ä½¿ç”¨ä¸åŒé¢„è®¾ï¼š

```yaml
# å®¢æœé¢„è®¾ - åªå…è®¸æŸ¥è¯¢å·¥å…·
name: å®¢æœåŠ©æ‰‹
tools:
  allowedTools:
    - get_time
    - web_search
    - get_user_info

# ç®¡ç†é¢„è®¾ - å…è®¸æ“ä½œå·¥å…·
name: ç®¡ç†åŠ©æ‰‹
tools:
  allowedTools:
    - get_group_info
    - set_group_title
    - kick_member
```

### 3. ç›‘æ§æ—¥å¿—

å®šæœŸæŸ¥çœ‹å·¥å…·è°ƒç”¨æ—¥å¿—ï¼š

```bash
#å·¥å…·æ—¥å¿—
```

æˆ–åœ¨ Web é¢æ¿æŸ¥çœ‹ç»Ÿè®¡æ•°æ®ã€‚

## å¸¸è§é—®é¢˜

### Q: AI ä¸è°ƒç”¨å·¥å…·ï¼Ÿ

1. æ£€æŸ¥å·¥å…·æ˜¯å¦å¯ç”¨ï¼š`builtinTools.enabled: true`
2. æ£€æŸ¥å·¥å…·ç±»åˆ«æ˜¯å¦åŒ…å«æ‰€éœ€å·¥å…·
3. æ£€æŸ¥é¢„è®¾æ˜¯å¦é™åˆ¶äº†å·¥å…·

### Q: å·¥å…·è°ƒç”¨å¤±è´¥ï¼Ÿ

1. æŸ¥çœ‹è°ƒè¯•æ—¥å¿—äº†è§£é”™è¯¯åŸå› 
2. æ£€æŸ¥å·¥å…·æ‰€éœ€çš„æƒé™
3. æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼ˆç½‘ç»œå·¥å…·ï¼‰

### Q: å·¥å…·è°ƒç”¨å¤ªæ…¢ï¼Ÿ

1. å‡å°‘å¯ç”¨çš„å·¥å…·æ•°é‡
2. ä½¿ç”¨æ›´å¿«çš„æ¨¡å‹
3. ä¼˜åŒ–ç½‘ç»œå·¥å…·çš„è¶…æ—¶è®¾ç½®

## ä¸‹ä¸€æ­¥

- [å·¥å…·å¼€å‘](/tools/) - å¼€å‘è‡ªå®šä¹‰å·¥å…·
- [MCP é…ç½®](/config/mcp) - æ¥å…¥å¤–éƒ¨ MCP
- [é¢„è®¾ç®¡ç†](/guide/presets) - é…ç½®é¢„è®¾å·¥å…·
